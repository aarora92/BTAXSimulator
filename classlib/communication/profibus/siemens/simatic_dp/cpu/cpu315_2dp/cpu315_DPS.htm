<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="GENERATOR" content="Mozilla/4.7 [de] (WinNT; I) [Netscape]">
   <meta name="Microsoft Theme" content="none, default">
   <meta name="Microsoft Border" content="none, default">
   <meta name="Template" content="C:\Programme\Microsoft Office\Office\html.dot">
   <meta name="Author" content="rk">
   <title>Siemens cpu315_2dp</title>
</head>
<body bgcolor="#FFFFFF" link="#0000FF" vlink="#800080">
&nbsp;
<table BORDER=0 CELLSPACING=0 CELLPADDING=4 WIDTH="796" >
<tr>
<td VALIGN=TOP WIDTH="773" HEIGHT="53" BGCOLOR="#808080"><b><font face="Arial"><font color="#FFFFFF"><font size=+4>Siemens
CPU315_DPS</font></font></font></b></td>
</tr>
</table>

<p><font face="Arial"><a href="#Features">Features</a> | <a href="#Installation">lnstallation
</a>|
<a href="#UserInterface">User
Interface</a> | <a href="#Configuration">Configuration</a> | <a href="#implementation">Implementation
Notes</a></font>
<br><a NAME="Features"></a>
<br><b><font face="Arial"><font color="#0000FF"><font size=+2>Features</font></font></font></b><font face="Arial,Helvetica"></font>
<p><font face="Arial,Helvetica">This Class allows the Communication between
a Siemens CPU315_2 and AutomationX (Master Slave)</font>
<p><font face="Arial"><a href="#Features">Features</a> | <a href="#Installation">lnstallation
</a>|
<a href="#UserInterface">User
Interface</a> | <a href="#Configuration">Configuration</a> | <a href="#implementation">Implementation
Notes</a></font>
<br>&nbsp;
<p><a NAME="Installation"></a>
<br><b><font face="Arial"><font color="#0000FF"><font size=+2>Installation</font></font></font></b>
<p>&nbsp;<font face="Arial">The class </font><font face="Arial,Helvetica">cpu315_DPS</font><font face="Arial">
Slave is comprised of the following components (files):</font>
<br>&nbsp;
<table BORDER CELLSPACING=2 CELLPADDING=4 WIDTH="703" >
<tr>
<td VALIGN=TOP WIDTH="150" BGCOLOR="#FFFFFF"><b><font face="Arial">Class
Component</font></b></td>

<td VALIGN=TOP WIDTH="214" BGCOLOR="#FFFFFF"><b><font face="Arial">Description</font></b></td>

<td VALIGN=TOP WIDTH="223" BGCOLOR="#FFFFFF"><b><font face="Arial">File
Name(s)</font></b></td>
</tr>

<tr>
<td VALIGN=TOP WIDTH="150"><b><font face="Arial">Class Color File</font></b></td>

<td VALIGN=TOP WIDTH="214"><font face="Arial">Includes some class specific
color definitions.</font></td>

<td VALIGN=TOP WIDTH="223">&nbsp;<font face="Arial,Helvetica">cpu315_DPS</font><font face="Arial">.color</font></td>
</tr>

<tr>
<td VALIGN=TOP WIDTH="150"><b><font face="Arial">Class File</font></b></td>

<td VALIGN=TOP WIDTH="214"><font face="Arial">Includes the process picture
representation and any popup menus.</font></td>

<td VALIGN=TOP WIDTH="223"><font face="Arial,Helvetica">cpu315_DPS</font><font face="Arial">.symbol</font>
<p>&nbsp;</td>
</tr>

<tr>
<td><b><font face="Arial">Symbol File</font></b></td>

<td><font face="Arial">Symbole used in the class</font></td>

<td><font face="Arial,Helvetica">cpu315_DPS</font><font face="Arial">_1k.symbol</font>
<br><font face="Arial,Helvetica">cpu315_DPS</font><font face="Arial">_2k.symbol</font>
<br><font face="Arial,Helvetica">cpu315_DPS</font><font face="Arial">_3k.symbol</font></td>
</tr>

<tr>
<td><b><font face="Arial">Enumerator Files</font></b></td>

<td><font face="Arial">Difines the enumerator for the class</font></td>

<td><font face="Arial">im153_1.enum</font>
<br><font face="Arial">im153_cfg_diag.enum</font></td>
</tr>

<tr>
<td VALIGN=TOP WIDTH="150"><b><font face="Arial">Graphic Files</font></b></td>

<td VALIGN=TOP WIDTH="214"><font face="Arial">Class Specific Graphic Files
for both, class definition and documentation.</font></td>

<td VALIGN=TOP WIDTH="223"><font face="Arial">axclassdocu16.bmp</font>
<br><font face="Arial">axclassdocu_grey16.bmp</font>
<br><font face="Arial">axinstancedocu16.bmp</font>
<br><font face="Arial">axinstancedocu_grey_16.bmp</font>
<p><font face="Arial">(and&nbsp; some documentation pixel maps)</font></td>
</tr>

<tr>
<td VALIGN=TOP WIDTH="150"><b><font face="Arial">HTML-Document</font></b></td>

<td VALIGN=TOP WIDTH="214"><font face="Arial">HTML document for Online
Help.</font></td>

<td VALIGN=TOP WIDTH="223"><font face="Arial,Helvetica">cpu315_DPS</font><font face="Arial">.htm</font></td>
</tr>
</table>
<font face="Arial"><b>Installation: </b>The above listed files must be
copied into the following directory of your classlib directory:</font>
<p><b><font face="Arial">./classlib/communication/profibus/siemens/simatic_dp/cpu/cpu315_2dp</font></b>
<br>&nbsp;
<p><font face="Arial"><a href="#Features">Features</a> | <a href="#Installation">lnstallation
</a>|
<a href="#UserInterface">User
Interface</a> | <a href="#Configuration">Configuration</a> | <a href="#implementation">Implementation
Notes</a></font>
<p><a NAME="UserInterface"></a>
<br><b><font face="Arial"><font color="#0000FF"><font size=+2>User Interface</font></font></font></b>
<p><font face="Arial">The cpu315_DPS&nbsp; graphical representation displays
the unique name identifier ($Instance) in the middle of the graphical representation.
Also, the profibus address and Profibusstate</font>
<br>&nbsp;
<table BORDER=2 CELLSPACING=3 CELLPADDING=3 COLS=3 WIDTH="700" >
<tr>
<td WIDTH="15%"><b><font face="Arial,Helvetica">Indication</font></b></td>

<td WIDTH="15%"><b><font face="Arial,Helvetica">State</font></b></td>

<td WIDTH="70%"><b><font face="Arial,Helvetica">Condition</font></b></td>
</tr>

<tr ALIGN=LEFT VALIGN=TOP>
<td WIDTH="25%"><font face="Arial">Bus Fault</font>
<br><font face="Arial">(BF)</font></td>

<td><font face="Arial">red</font></td>

<td><font face="Arial">Wrong Parameterization - no data transfere beteween
DP Master and cpu315_DPS</font></td>
</tr>

<tr ALIGN=LEFT VALIGN=TOP>
<td><font face="Arial">Service Fault</font>
<br><font face="Arial">(SF)</font></td>

<td><font face="Arial">red</font></td>

<td><font face="Arial">Configuration is not the same as defined in the
PLC</font></td>
</tr>

<tr>
<td><font face="Arial">RUN</font></td>

<td><font face="Arial">green</font></td>

<td><font face="Arial">Power is on (will appear grey when no power)</font></td>
</tr>
</table>

<p><img SRC="cpu315_DPS.gif" height=503 width=320>
<p><font face="Arial"><font size=-1>Figure 1: Graphical Representation</font></font>
<br>&nbsp;
<p><font face="Arial">Figure 2 shows the <b>Address Popup</b>, which is
invoked by selecting the graphical representation. The popup displays the
Profibus Address and the actual State of the module. From here, you can
change the Profibus address, reset the Module plus open the HTML Documentation.</font>
<p><img SRC="cpu315_DPS_adr_popup.gif" height=245 width=178>
<p><font face="Arial"><font size=-1>Figure 2: The Address PopUp</font></font>
<br>&nbsp;
<p><font face="Arial">Figure 3 shows the <b>Error Popup</b>, which will
invoke if there are any new errors. The popup will display the actual errors
plus error messages.</font>
<p><img SRC="cpu315_DPS_error_popup.gif" height=305 width=290>
<p><font face="Arial"><font size=-1>Figure 3: Error Popup</font></font>
<br>&nbsp;
<p><font face="Arial"><a href="#Features">Features</a> | <a href="#Installation">lnstallation
</a>|
<a href="#UserInterface">User
Interface</a> | <a href="#Configuration">Configuration</a> | <a href="#implementation">Implementation
Notes</a></font>
<p><a NAME="Configuration"></a>
<br><b><font face="Arial"><font color="#0000FF"><font size=+2>Configuration</font></font></font></b>
<p><font face="Arial">The following table lists the configuration parameters
for the im cpu315_DPS Slave. The parameter data type, the default values
and a brief description are listed. The grey shaded rows are parameters
which must not be changed.</font>
<br>&nbsp;
<br>&nbsp;
<table BORDER CELLPADDING=2 WIDTH="918" >
<tr>
<td VALIGN=CENTER WIDTH="7%" HEIGHT="16" BGCOLOR="#FFFFFF"><b><font size=+1><font face="Arial">It</font><font face="Arial,Helvetica">em</font></font></b></td>

<td VALIGN=CENTER WIDTH="21%" HEIGHT="16" BGCOLOR="#FFFFFF"><b><font face="Arial,Helvetica"><font size=+1>Variable</font></font></b></td>

<td><b><font face="Arial,Helvetica"><font color="#000000"><font size=+1>Type</font></font></font></b></td>

<td VALIGN=CENTER WIDTH="18%" HEIGHT="16" BGCOLOR="#FFFFFF"><b><font face="Arial,Helvetica"><font size=+1>Default</font></font></b></td>

<td VALIGN=CENTER WIDTH="42%" HEIGHT="16" BGCOLOR="#FFFFFF"><b><font face="Arial,Helvetica"><font size=+1>Description</font></font></b></td>
</tr>

<tr>
<td VALIGN=CENTER WIDTH="7%" HEIGHT="16" BGCOLOR="#FFFFFF">
<center><font face="Arial,Helvetica">1</font></center>
</td>

<td VALIGN=CENTER WIDTH="21%" HEIGHT="16" BGCOLOR="#FFFFFF"><font face="Arial,Helvetica">&nbsp;master</font></td>

<td><font face="Arial,Helvetica">ENUM:Master_Con</font></td>

<td VALIGN=CENTER WIDTH="18%" HEIGHT="16" BGCOLOR="#FFFFFF"><font face="Arial,Helvetica">MIO_0</font></td>

<td VALIGN=CENTER WIDTH="42%" HEIGHT="16" BGCOLOR="#FFFFFF"><font face="Arial,Helvetica">Connection
to profibus master&nbsp;</font></td>
</tr>

<tr>
<td VALIGN=CENTER WIDTH="7%" HEIGHT="22" BGCOLOR="#FFFFFF">
<center><font face="Arial,Helvetica">2</font></center>
</td>

<td VALIGN=CENTER WIDTH="21%" HEIGHT="22" BGCOLOR="#FFFFFF"><font face="Arial,Helvetica">&nbsp;address</font></td>

<td><font face="Arial,Helvetica">USINT</font></td>

<td VALIGN=CENTER WIDTH="18%" HEIGHT="22" BGCOLOR="#FFFFFF"><font face="Arial,Helvetica">7&nbsp;</font></td>

<td VALIGN=CENTER WIDTH="42%" HEIGHT="22" BGCOLOR="#FFFFFF"><font face="Arial,Helvetica">Profibus
Slave address&nbsp;</font></td>
</tr>

<tr>
<td VALIGN=CENTER WIDTH="7%" HEIGHT="22" BGCOLOR="#FFFFFF">
<center><font face="Arial,Helvetica">3</font></center>
</td>

<td VALIGN=CENTER WIDTH="21%" HEIGHT="22" BGCOLOR="#FFFFFF"><font face="Arial,Helvetica">&nbsp;wd_on</font></td>

<td><font face="Arial,Helvetica">BOOL</font></td>

<td VALIGN=CENTER WIDTH="18%" HEIGHT="22" BGCOLOR="#FFFFFF"><font face="Arial,Helvetica">YES&nbsp;</font></td>

<td VALIGN=CENTER WIDTH="42%" HEIGHT="22" BGCOLOR="#FFFFFF"><font face="Arial,Helvetica">YES
activates the watch dog (wd) on the DP Slave&nbsp;</font></td>
</tr>

<tr>
<td VALIGN=CENTER WIDTH="7%" HEIGHT="22" BGCOLOR="#FFFFFF">
<center><font face="Arial,Helvetica">4</font></center>
</td>

<td VALIGN=CENTER WIDTH="21%" HEIGHT="22" BGCOLOR="#FFFFFF"><font face="Arial,Helvetica">wd_fact_1</font></td>

<td><font face="Arial,Helvetica">USINT</font></td>

<td VALIGN=CENTER WIDTH="18%" HEIGHT="22" BGCOLOR="#FFFFFF"><font face="Arial,Helvetica">100</font></td>

<td VALIGN=CENTER WIDTH="42%" HEIGHT="22" BGCOLOR="#FFFFFF"><font face="Arial,Helvetica">Wd_fact_1
* wd_fact2 * 10ms is the delay for wd</font></td>
</tr>

<tr>
<td VALIGN=CENTER WIDTH="7%" HEIGHT="22" BGCOLOR="#FFFFFF">
<center><font face="Arial,Helvetica">5</font></center>
</td>

<td VALIGN=CENTER WIDTH="21%" HEIGHT="22" BGCOLOR="#FFFFFF"><font face="Arial,Helvetica">wd_fact_2</font></td>

<td><font face="Arial,Helvetica">USINT</font></td>

<td VALIGN=CENTER WIDTH="18%" HEIGHT="22" BGCOLOR="#FFFFFF"><font face="Arial,Helvetica">3</font></td>

<td VALIGN=CENTER WIDTH="42%" HEIGHT="22" BGCOLOR="#FFFFFF"><font face="Arial,Helvetica">Wd_fact_1
* wd_fact2 * 10ms is the delay for wd</font></td>
</tr>

<tr>
<td VALIGN=CENTER WIDTH="7%" HEIGHT="22" BGCOLOR="#FFFFFF">
<center><font face="Arial,Helvetica">6</font></center>
</td>

<td VALIGN=CENTER WIDTH="21%" HEIGHT="22" BGCOLOR="#FFFFFF"><font face="Arial,Helvetica">GSD</font></td>

<td><font face="Arial,Helvetica">STRING</font></td>

<td VALIGN=CENTER WIDTH="18%" HEIGHT="22" BGCOLOR="#FFFFFF"><font face="Arial,Helvetica">WSIEM801D.GSD</font></td>

<td VALIGN=CENTER WIDTH="42%" HEIGHT="22" BGCOLOR="#FFFFFF"><font face="Arial,Helvetica">GSD
name for this Profibus DP Slave</font></td>
</tr>

<tr>
<td VALIGN=CENTER WIDTH="7%" HEIGHT="22" BGCOLOR="#FFFFFF">
<center><font face="Arial,Helvetica">7</font></center>
</td>

<td VALIGN=CENTER WIDTH="21%" HEIGHT="22" BGCOLOR="#FFFFFF"><font face="Arial,Helvetica">group_ident</font></td>

<td><font face="Arial,Helvetica">USINT</font></td>

<td VALIGN=CENTER WIDTH="18%" HEIGHT="22" BGCOLOR="#FFFFFF"><font face="Arial,Helvetica">0</font></td>

<td VALIGN=CENTER WIDTH="42%" HEIGHT="22" BGCOLOR="#FFFFFF"><font face="Arial,Helvetica">DP
Slave group identifier</font></td>
</tr>

<tr>
<td VALIGN=CENTER WIDTH="7%" HEIGHT="22" BGCOLOR="#FFFFFF">
<center><font face="Arial,Helvetica">8</font></center>
</td>

<td VALIGN=CENTER WIDTH="21%" HEIGHT="22" BGCOLOR="#FFFFFF"><font face="Arial,Helvetica"><font color="#0000FF">freeze_mode</font></font></td>

<td><font face="Arial,Helvetica">BOOL</font></td>

<td VALIGN=CENTER WIDTH="18%" HEIGHT="22" BGCOLOR="#FFFFFF"><font face="Arial,Helvetica">NO</font></td>

<td VALIGN=CENTER WIDTH="42%" HEIGHT="22" BGCOLOR="#FFFFFF"><font face="Arial,Helvetica">The
outputs on the slave system are frozen</font></td>
</tr>

<tr>
<td VALIGN=CENTER WIDTH="7%" HEIGHT="22" BGCOLOR="#FFFFFF">
<center><font face="Arial,Helvetica">9</font></center>
</td>

<td VALIGN=CENTER WIDTH="21%" HEIGHT="22" BGCOLOR="#FFFFFF"><font face="Arial,Helvetica"><font color="#0000FF">unfreeze</font></font></td>

<td><font face="Arial,Helvetica">BOOL</font></td>

<td VALIGN=CENTER WIDTH="18%" HEIGHT="22" BGCOLOR="#FFFFFF"><font face="Arial,Helvetica">NO</font></td>

<td VALIGN=CENTER WIDTH="42%" HEIGHT="22" BGCOLOR="#FFFFFF"><font face="Arial,Helvetica">Deactivate
the freeze mode&nbsp;</font></td>
</tr>

<tr>
<td VALIGN=CENTER WIDTH="7%" HEIGHT="22" BGCOLOR="#FFFFFF">
<center><font face="Arial,Helvetica">10</font></center>
</td>

<td VALIGN=CENTER WIDTH="21%" HEIGHT="22" BGCOLOR="#FFFFFF"><font face="Arial,Helvetica"><font color="#0000FF">sync_mode</font></font></td>

<td><font face="Arial,Helvetica">BOOL</font></td>

<td VALIGN=CENTER WIDTH="18%" HEIGHT="22" BGCOLOR="#FFFFFF"><font face="Arial,Helvetica">NO</font></td>

<td VALIGN=CENTER WIDTH="42%" HEIGHT="22" BGCOLOR="#FFFFFF"><font face="Arial,Helvetica">Hold
out-/inputs as long as unsync is set</font></td>
</tr>

<tr>
<td VALIGN=CENTER WIDTH="7%" HEIGHT="22" BGCOLOR="#FFFFFF">
<center><font face="Arial,Helvetica">11</font></center>
</td>

<td VALIGN=CENTER WIDTH="21%" HEIGHT="22" BGCOLOR="#FFFFFF"><font face="Arial,Helvetica"><font color="#0000FF">unsync</font></font></td>

<td><font face="Arial,Helvetica">BOOL</font></td>

<td VALIGN=CENTER WIDTH="18%" HEIGHT="22" BGCOLOR="#FFFFFF"><font face="Arial,Helvetica">NO&nbsp;</font></td>

<td VALIGN=CENTER WIDTH="42%" HEIGHT="22" BGCOLOR="#FFFFFF"><font face="Arial,Helvetica">Reset
the state machine for slave handling</font></td>
</tr>

<tr>
<td VALIGN=CENTER WIDTH="7%" HEIGHT="22" BGCOLOR="#FFFFFF">
<center><font face="Arial,Helvetica">12</font></center>
</td>

<td VALIGN=CENTER WIDTH="21%" HEIGHT="22" BGCOLOR="#FFFFFF"><font face="Arial,Helvetica"><font color="#0000FF">clear_data</font></font></td>

<td><font face="Arial,Helvetica">BOOL</font></td>

<td VALIGN=CENTER WIDTH="18%" HEIGHT="22" BGCOLOR="#FFFFFF"><font face="Arial,Helvetica">NO</font></td>

<td VALIGN=CENTER WIDTH="42%" HEIGHT="22" BGCOLOR="#FFFFFF"><font face="Arial,Helvetica">Request
for new parameterization</font></td>
</tr>

<tr>
<td VALIGN=CENTER WIDTH="7%" HEIGHT="22" BGCOLOR="#FFFFFF">
<center><font face="Arial,Helvetica">13</font></center>
</td>

<td VALIGN=CENTER WIDTH="21%" HEIGHT="22" BGCOLOR="#FFFFFF"><font face="Arial,Helvetica"><font color="#0000FF">reset_slave</font></font></td>

<td><font face="Arial,Helvetica">BOOL</font></td>

<td VALIGN=CENTER WIDTH="18%" HEIGHT="22" BGCOLOR="#FFFFFF"><font face="Arial,Helvetica">NO</font></td>

<td VALIGN=CENTER WIDTH="42%" HEIGHT="22" BGCOLOR="#FFFFFF"><font face="Arial,Helvetica">Reset
the state machine for slave handling</font></td>
</tr>

<tr>
<td VALIGN=CENTER WIDTH="7%" HEIGHT="22" BGCOLOR="#FFFFFF">
<center><font face="Arial,Helvetica">14</font></center>
</td>

<td VALIGN=CENTER WIDTH="21%" HEIGHT="22" BGCOLOR="#FFFFFF"><font face="Arial,Helvetica"><font color="#0000FF">new_prm_request</font></font></td>

<td><font face="Arial,Helvetica">BOOL</font></td>

<td VALIGN=CENTER WIDTH="18%" HEIGHT="22" BGCOLOR="#FFFFFF"><font face="Arial,Helvetica">NO</font></td>

<td VALIGN=CENTER WIDTH="42%" HEIGHT="22" BGCOLOR="#FFFFFF"><font face="Arial,Helvetica">Request
for new parameterization</font></td>
</tr>

<tr>
<td>
<center><font face="Arial,Helvetica">15</font></center>
</td>

<td><font face="Arial,Helvetica">ModulePushEnable</font></td>

<td><font face="Arial,Helvetica">BOOL</font></td>

<td><font face="Arial,Helvetica">NO</font></td>

<td><font face="Arial,Helvetica">YES allows to remove and insert a module</font></td>
</tr>

<tr>
<td>
<center><font face="Arial,Helvetica">16</font></center>
</td>

<td><font face="Arial,Helvetica">DataFormat</font></td>

<td><font face="Arial,Helvetica">ENUM:DataFormat</font></td>

<td><font face="Arial,Helvetica">VZ15Bit</font></td>

<td><font face="Arial,Helvetica">Changes the data format S7/M7 - S5</font></td>
</tr>

<tr>
<td>
<center><font face="Arial,Helvetica">17</font></center>
</td>

<td><font face="Arial,Helvetica">DiagAlarmEnable</font></td>

<td><font face="Arial,Helvetica">BOOL</font></td>

<td><font face="Arial,Helvetica">NO</font></td>

<td><font face="Arial,Helvetica">Yes allows diagnosis alarm</font></td>
</tr>

<tr>
<td>
<center><font face="Arial,Helvetica">&nbsp;18</font></center>
</td>

<td><font face="Arial,Helvetica">ProzAlarmEnable</font></td>

<td><font face="Arial,Helvetica">BOOL</font></td>

<td><font face="Arial,Helvetica">NO</font></td>

<td><font face="Arial,Helvetica">Yes allows process alarm</font></td>
</tr>

<tr>
<td>
<center><font face="Arial,Helvetica">19</font></center>
</td>

<td><font face="Arial,Helvetica">DPV_Enable</font></td>

<td><font face="Arial,Helvetica">BOOL</font></td>

<td><font face="Arial,Helvetica">NO</font></td>

<td><font face="Arial,Helvetica">Yes allows acyclic parameterization</font></td>
</tr>

<tr>
<td>
<center><font face="Arial,Helvetica">20</font></center>
</td>

<td><font face="Arial,Helvetica">Connection</font></td>

<td><font face="Arial,Helvetica">STRING</font></td>

<td><font face="Arial,Helvetica">...</font></td>

<td><font face="Arial,Helvetica">With the instance name of the following
module will be connected to this one</font></td>
</tr>

<tr BGCOLOR="#C0C0C0">
<td>
<center><font face="Arial,Helvetica">21</font></center>
</td>

<td><font face="Arial,Helvetica">Loc Connection</font></td>

<td><font face="Arial,Helvetica">STRING</font></td>

<td><font face="Arial,Helvetica">K1</font></td>

<td><font face="Arial,Helvetica">internal class connection</font></td>
</tr>

<tr BGCOLOR="#C0C0C0">
<td>
<center><font face="Arial,Helvetica">22</font></center>
</td>

<td><font face="Arial,Helvetica">ViewConnection</font></td>

<td><font face="Arial,Helvetica">STRING</font></td>

<td><font face="Arial,Helvetica">...</font></td>

<td><font face="Arial,Helvetica">Show all connected I/O modules</font></td>
</tr>

<tr BGCOLOR="#C0C0C0">
<td>
<center><font face="Arial,Helvetica">23</font></center>
</td>

<td><font face="Arial,Helvetica">DataTransfer Valid</font></td>

<td><font face="Arial,Helvetica">BOOL</font></td>

<td><font face="Arial,Helvetica">NO</font></td>

<td><font face="Arial,Helvetica">Profibus in-/output data valid</font></td>
</tr>

<tr BGCOLOR="#C0C0C0">
<td VALIGN=CENTER WIDTH="7%" HEIGHT="22" BGCOLOR="#C0C0C0">
<center><font face="Arial,Helvetica">24</font></center>
</td>

<td VALIGN=CENTER WIDTH="21%" HEIGHT="22" BGCOLOR="#C0C0C0"><font face="Arial,Helvetica">init_counter</font></td>

<td><font face="Arial,Helvetica">BOOL</font></td>

<td VALIGN=CENTER WIDTH="18%" HEIGHT="22" BGCOLOR="#C0C0C0"><font face="Arial,Helvetica">0</font></td>

<td VALIGN=CENTER WIDTH="42%" HEIGHT="22" BGCOLOR="#C0C0C0"><font face="Arial,Helvetica">Counter
for starting state machine</font></td>
</tr>

<tr BGCOLOR="#C0C0C0">
<td VALIGN=CENTER WIDTH="7%" HEIGHT="22" BGCOLOR="#C0C0C0">
<center><font face="Arial,Helvetica">25</font></center>
</td>

<td VALIGN=CENTER WIDTH="21%" HEIGHT="22" BGCOLOR="#C0C0C0"><font face="Arial,Helvetica">Exchange_cycle</font></td>

<td><font face="Arial,Helvetica">BOOL</font></td>

<td VALIGN=CENTER WIDTH="18%" HEIGHT="22" BGCOLOR="#C0C0C0"><font face="Arial,Helvetica">0</font></td>

<td VALIGN=CENTER WIDTH="42%" HEIGHT="22" BGCOLOR="#C0C0C0"><font face="Arial,Helvetica">Counter
for valid data transfers</font></td>
</tr>

<tr BGCOLOR="#C0C0C0">
<td VALIGN=CENTER WIDTH="7%" HEIGHT="22" BGCOLOR="#C0C0C0">
<center><font face="Arial,Helvetica">26</font></center>
</td>

<td VALIGN=CENTER WIDTH="21%" HEIGHT="22" BGCOLOR="#C0C0C0"><font face="Arial,Helvetica">Hardware_error</font></td>

<td><font face="Arial,Helvetica">ALARM</font></td>

<td VALIGN=CENTER WIDTH="18%" HEIGHT="22" BGCOLOR="#C0C0C0"><font face="Arial,Helvetica">NO</font></td>

<td VALIGN=CENTER WIDTH="42%" HEIGHT="22" BGCOLOR="#C0C0C0"><font face="Arial,Helvetica">YES
if a hardware error occurs</font></td>
</tr>

<tr BGCOLOR="#C0C0C0">
<td VALIGN=CENTER WIDTH="7%" HEIGHT="22" BGCOLOR="#C0C0C0">
<center><font face="Arial,Helvetica">27</font></center>
</td>

<td VALIGN=CENTER WIDTH="21%" HEIGHT="22" BGCOLOR="#C0C0C0"><font face="Arial,Helvetica">Software_error</font></td>

<td><font face="Arial,Helvetica">ALARM</font></td>

<td VALIGN=CENTER WIDTH="18%" HEIGHT="22" BGCOLOR="#C0C0C0"><font face="Arial,Helvetica">NO</font></td>

<td VALIGN=CENTER WIDTH="42%" HEIGHT="22" BGCOLOR="#C0C0C0"><font face="Arial,Helvetica">YES
if a software error occurs</font></td>
</tr>

<tr BGCOLOR="#C0C0C0">
<td VALIGN=CENTER WIDTH="7%" HEIGHT="22" BGCOLOR="#C0C0C0">
<center><font face="Arial,Helvetica">28</font></center>
</td>

<td VALIGN=CENTER WIDTH="21%" HEIGHT="22" BGCOLOR="#C0C0C0"><font face="Arial,Helvetica">Module_error</font></td>

<td><font face="Arial,Helvetica">ALARM</font></td>

<td VALIGN=CENTER WIDTH="18%" HEIGHT="22" BGCOLOR="#C0C0C0"><font face="Arial,Helvetica">NO</font></td>

<td VALIGN=CENTER WIDTH="42%" HEIGHT="22" BGCOLOR="#C0C0C0"><font face="Arial,Helvetica">YES
if a module error occurs</font></td>
</tr>

<tr BGCOLOR="#C0C0C0">
<td VALIGN=CENTER WIDTH="7%" HEIGHT="22" BGCOLOR="#C0C0C0">
<center><font face="Arial,Helvetica">29</font></center>
</td>

<td VALIGN=CENTER WIDTH="21%" HEIGHT="22" BGCOLOR="#C0C0C0"><font face="Arial,Helvetica">Status</font></td>

<td><font face="Arial,Helvetica">DINT</font></td>

<td VALIGN=CENTER WIDTH="18%" HEIGHT="22" BGCOLOR="#C0C0C0"><font face="Arial,Helvetica">0</font></td>

<td VALIGN=CENTER WIDTH="42%" HEIGHT="22" BGCOLOR="#C0C0C0"><font face="Arial,Helvetica">Status
value of the state machine</font></td>
</tr>

<tr BGCOLOR="#C0C0C0">
<td VALIGN=CENTER WIDTH="7%" HEIGHT="22" BGCOLOR="#C0C0C0">
<center><font face="Arial,Helvetica">30</font></center>
</td>

<td VALIGN=CENTER WIDTH="21%" HEIGHT="22" BGCOLOR="#C0C0C0"><font face="Arial,Helvetica">Status
string</font></td>

<td><font face="Arial,Helvetica">STRING</font></td>

<td VALIGN=CENTER WIDTH="18%" HEIGHT="22" BGCOLOR="#C0C0C0"><font face="Arial,Helvetica">No
valid Profibus Master</font></td>

<td VALIGN=CENTER WIDTH="42%" HEIGHT="22" BGCOLOR="#C0C0C0"><font face="Arial,Helvetica">Status
string of the state machine</font></td>
</tr>

<tr BGCOLOR="#C0C0C0">
<td VALIGN=CENTER WIDTH="7%" HEIGHT="22" BGCOLOR="#C0C0C0">
<center><font face="Arial,Helvetica">31</font></center>
</td>

<td VALIGN=CENTER WIDTH="21%" HEIGHT="22" BGCOLOR="#C0C0C0"><font face="Arial,Helvetica">Last_diag_msg</font></td>

<td><font face="Arial,Helvetica">STRING</font></td>

<td VALIGN=CENTER WIDTH="18%" HEIGHT="22" BGCOLOR="#C0C0C0"><font face="Arial,Helvetica">&nbsp;</font></td>

<td VALIGN=CENTER WIDTH="42%" HEIGHT="22" BGCOLOR="#C0C0C0"><font face="Arial,Helvetica">Last
diagnostic message</font></td>
</tr>

<tr BGCOLOR="#C0C0C0">
<td VALIGN=CENTER WIDTH="7%" HEIGHT="22" BGCOLOR="#C0C0C0">
<center><font face="Arial,Helvetica">32</font></center>
</td>

<td VALIGN=CENTER WIDTH="21%" HEIGHT="22" BGCOLOR="#C0C0C0"><font face="Arial,Helvetica">New_error_msg</font></td>

<td><font face="Arial,Helvetica">BOOL</font></td>

<td VALIGN=CENTER WIDTH="18%" HEIGHT="22" BGCOLOR="#C0C0C0"><font face="Arial,Helvetica">NO</font></td>

<td VALIGN=CENTER WIDTH="42%" HEIGHT="22" BGCOLOR="#C0C0C0"><font face="Arial,Helvetica">YES
if a new error occurs</font></td>
</tr>

<tr BGCOLOR="#C0C0C0">
<td VALIGN=CENTER WIDTH="7%" HEIGHT="22" BGCOLOR="#C0C0C0">
<center><font face="Arial,Helvetica">33</font></center>
</td>

<td VALIGN=CENTER WIDTH="21%" HEIGHT="22" BGCOLOR="#C0C0C0"><font face="Arial,Helvetica">Visual</font></td>

<td><font face="Arial,Helvetica">BOOL</font></td>

<td VALIGN=CENTER WIDTH="18%" HEIGHT="22" BGCOLOR="#C0C0C0"><font face="Arial,Helvetica">NO</font></td>

<td VALIGN=CENTER WIDTH="42%" HEIGHT="22" BGCOLOR="#C0C0C0"><font face="Arial,Helvetica">YES
if error message popup is visible</font></td>
</tr>

<tr BGCOLOR="#C0C0C0">
<td>
<center><font face="Arial,Helvetica">34</font></center>
</td>

<td><font face="Arial,Helvetica">DPV1_DiagCycle</font></td>

<td><font face="Arial,Helvetica">UDINT</font></td>

<td><font face="Arial,Helvetica">0</font></td>

<td><font face="Arial,Helvetica">after this sps cycle count start a acycle
diagnosis</font></td>
</tr>

<tr BGCOLOR="#C0C0C0">
<td>
<center><font face="Arial,Helvetica">35</font></center>
</td>

<td><font face="Arial,Helvetica">NewDiagData</font></td>

<td><font face="Arial,Helvetica">Byte</font></td>

<td><font face="Arial,Helvetica">0</font></td>

<td><font face="Arial,Helvetica">shows the actual diagnosis data</font></td>
</tr>

<tr BGCOLOR="#C0C0C0">
<td>
<center><font face="Arial,Helvetica">36</font></center>
</td>

<td><font face="Arial,Helvetica">ActDevDiagDataLen</font></td>

<td><font face="Arial,Helvetica">USINT</font></td>

<td><font face="Arial,Helvetica">0</font></td>

<td><font face="Arial,Helvetica">Active device diagnosis data lenght</font></td>
</tr>

<tr BGCOLOR="#C0C0C0">
<td>
<center><font face="Arial,Helvetica">37</font></center>
</td>

<td><font face="Arial,Helvetica">DeviceDiagData[30]</font></td>

<td><font face="Arial,Helvetica">USINT</font></td>

<td><font face="Arial,Helvetica">0</font></td>

<td><font face="Arial,Helvetica">Device diagnosis data</font></td>
</tr>

<tr BGCOLOR="#C0C0C0">
<td>
<center><font face="Arial,Helvetica">38</font></center>
</td>

<td><font face="Arial,Helvetica">ActIdentDiagDataLen</font></td>

<td><font face="Arial,Helvetica">USINT</font></td>

<td><font face="Arial,Helvetica">0</font></td>

<td><font face="Arial,Helvetica">Active identifier diagnosis data length</font></td>
</tr>

<tr BGCOLOR="#C0C0C0">
<td>
<center><font face="Arial,Helvetica">39</font></center>
</td>

<td><font face="Arial,Helvetica">IdentifierDiagData[3]</font></td>

<td><font face="Arial,Helvetica">USINT</font></td>

<td><font face="Arial,Helvetica">0</font></td>

<td><font face="Arial,Helvetica">Identifier diagnosis data</font></td>
</tr>

<tr BGCOLOR="#C0C0C0">
<td>
<center><font face="Arial,Helvetica">40</font></center>
</td>

<td><font face="Arial,Helvetica">ActChanDiagData</font></td>

<td><font face="Arial,Helvetica">USINT</font></td>

<td><font face="Arial,Helvetica">0</font></td>

<td><font face="Arial,Helvetica">Active channel diagnosis data length</font></td>
</tr>

<tr BGCOLOR="#C0C0C0">
<td>
<center><font face="Arial,Helvetica">41</font></center>
</td>

<td><font face="Arial,Helvetica">ChannelDiagData[30]</font></td>

<td><font face="Arial,Helvetica">USINT</font></td>

<td><font face="Arial,Helvetica">0</font></td>

<td><font face="Arial,Helvetica">Channel diagnosis data</font></td>
</tr>

<tr BGCOLOR="#C0C0C0">
<td VALIGN=CENTER WIDTH="7%" HEIGHT="22" BGCOLOR="#C0C0C0">
<center><font face="Arial,Helvetica">42</font></center>
</td>

<td VALIGN=CENTER WIDTH="21%" HEIGHT="22" BGCOLOR="#C0C0C0"><font face="Arial,Helvetica">Quit</font></td>

<td><font face="Arial,Helvetica">BOOL</font></td>

<td VALIGN=CENTER WIDTH="18%" HEIGHT="22" BGCOLOR="#C0C0C0"><font face="Arial,Helvetica">NO</font></td>

<td VALIGN=CENTER WIDTH="42%" HEIGHT="22" BGCOLOR="#C0C0C0"><font face="Arial,Helvetica">YES
if acknowledge error messages</font></td>
</tr>

<tr BGCOLOR="#C0C0C0">
<td VALIGN=CENTER WIDTH="7%" HEIGHT="22" BGCOLOR="#C0C0C0">
<center><font face="Arial,Helvetica">43</font></center>
</td>

<td VALIGN=CENTER WIDTH="21%" HEIGHT="22" BGCOLOR="#C0C0C0"><font face="Arial,Helvetica">Error_msg
[10]</font></td>

<td><font face="Arial,Helvetica">STRING</font></td>

<td VALIGN=CENTER WIDTH="18%" HEIGHT="22" BGCOLOR="#C0C0C0"><font face="Arial,Helvetica">&nbsp;</font></td>

<td VALIGN=CENTER WIDTH="42%" HEIGHT="22" BGCOLOR="#C0C0C0"><font face="Arial,Helvetica">Error
message array</font></td>
</tr>

<tr BGCOLOR="#C0C0C0">
<td VALIGN=CENTER WIDTH="7%" HEIGHT="22" BGCOLOR="#C0C0C0">
<center><font face="Arial,Helvetica">44</font></center>
</td>

<td VALIGN=CENTER WIDTH="21%" HEIGHT="22" BGCOLOR="#C0C0C0"><font face="Arial,Helvetica">Local_struct</font></td>

<td><font face="Arial,Helvetica">POINTER</font></td>

<td VALIGN=CENTER WIDTH="18%" HEIGHT="22" BGCOLOR="#C0C0C0"><font face="Arial,Helvetica">4320020hex</font></td>

<td VALIGN=CENTER WIDTH="42%" HEIGHT="22" BGCOLOR="#C0C0C0"><font face="Arial,Helvetica">Internal
pointer for the local structure</font></td>
</tr>

<tr BGCOLOR="#C0C0C0">
<td VALIGN=CENTER WIDTH="7%" HEIGHT="22" BGCOLOR="#C0C0C0">
<center><font face="Arial,Helvetica">45</font></center>
</td>

<td VALIGN=CENTER WIDTH="21%" HEIGHT="22" BGCOLOR="#C0C0C0"><font face="Arial,Helvetica">SPS_Cycle</font></td>

<td><font face="Arial,Helvetica">code</font></td>

<td VALIGN=CENTER WIDTH="18%" HEIGHT="22" BGCOLOR="#C0C0C0"><font face="Arial,Helvetica">Axx_function("profibus_DP",</font>
<br><font face="Arial,Helvetica">"SPSCycleHandleDPSlave");</font></td>

<td VALIGN=CENTER WIDTH="42%" HEIGHT="22" BGCOLOR="#C0C0C0"><font face="Arial,Helvetica">Run
the AXX function</font></td>
</tr>
</table>
<font face="Arial"><a href="#Features">Features</a> | <a href="#Installation">lnstallation
</a>|
<a href="#UserInterface">User
Interface</a> | <a href="#Configuration">Configuration</a> | <a href="#implementation">Implementation
Notes</a></font>
<p><a NAME="implementation"></a>
<br><b><font face="Arial"><font color="#0000FF"><font size=+2>Implementation
Notes</font></font></font></b>
<p><b><u><font face="Arial,Helvetica"><font size=+1>How to Create the profibus
Slave</font></font></u></b>
<p><font face="Arial,Helvetica">The first step is to configure a Profibus
Slave module. To create a Profibus Slave, take the following steps:</font>
<p><font face="Arial,Helvetica"><b>Step 1</b>:</font>
<br><font face="Arial,Helvetica">Select the Profibus Slave class and drop
an instance of it into the picture window</font>
<p><font face="Arial,Helvetica"><b>Step 2</b>:</font>
<br><font face="Arial,Helvetica">With the slave object selected, enter
a unique instance name and remark in the declaration field, in the configuration
panel.</font>
<p><i><font face="Arial,Helvetica">When you are naming I/O modules, be
sure to assign meaningful names that you will be able to recognize later.
For example, the Profibus Slave should at least be given an address number:</font></i>
<br>&nbsp;
<ul>
<li>
<i><font face="Arial,Helvetica">Instance name = DPS</font></i></li>
</ul>

<ul>
<li>
<i><font face="Arial,Helvetica">Remark= Connection to Siemens cpu315 adr.4</font></i></li>
</ul>
<img SRC="cpu315_instance.gif" height=150 width=534>
<p><font face="Arial,Helvetica"><font size=-1>Figure 4: Declaration for
the Profibus Master</font></font>
<br>&nbsp;
<p><font face="Arial,Helvetica">Step3:</font>
<br><font face="Arial,Helvetica">Open the Server Data tab. Find the resource
called "master" in the data list. Click the value field with the left mouse
button.</font>
<p><i><font face="Arial,Helvetica">Automationx automatically detects the
master and present it in a drop down list.</font></i>
<p><font face="Arial,Helvetica">Choose the master name from the list.</font>
<p><img SRC="cpu315_master.gif" height=473 width=628>
<br><font face="Arial,Helvetica"><font size=-1>Figure5: Assign the master</font></font>
<br>&nbsp;
<p><font face="Arial,Helvetica"><b>Step 4</b>:</font>
<br><font face="Arial,Helvetica">Find the resource called "address" in
the Server Data list. Use the increment/decrement arrows to set the address
number of the slave.</font>
<p><img SRC="cpu315_address.gif" height=252 width=478>
<p><font face="Arial,Helvetica"><font size=-1>&nbsp;Figure 6: Assign the
Profibus Slave address</font></font>
<p><font face="Arial"><a href="#Features">Features</a> | <a href="#Installation">lnstallation
</a>|
<a href="#UserInterface">User
Interface</a> | <a href="#Configuration">Configuration</a> | <a href="#implementation">Implementation
Notes</a></font>
<br>&nbsp;
</body>
</html>
